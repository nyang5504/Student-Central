{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ninay\\\\Documents\\\\capstone-499\\\\Student-Central\\\\student-central\\\\src\\\\components\\\\schedule-page\\\\Schedulepage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport '../../styles/schedule-page/Schedulepage.css';\nimport Schedule from './Schedule';\nimport AddEventPopup from './AddEventPopup';\nimport AddBtn from \"../../assets/add-btn.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SchedulePage = () => {\n  _s();\n  //state variable and function to keep track of all events\n  const [events, setEvents] = useState([]);\n  const [mounted, setMounted] = useState(false);\n\n  //boolean to determine if the form popup is open\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const navigate = useNavigate();\n\n  //fetches previously saved events from database\n  useEffect(() => {\n    const fetchData = () => {\n      fetch('http://localhost:4000/api/schedule/my-events', {\n        method: 'GET',\n        credentials: 'include'\n      }).then(response => {\n        if (response.status === 401) {\n          navigate('/login');\n          return;\n        }\n        return response.json();\n      }).then(data => {\n        setEvents(data);\n      }).catch(error => {\n        console.error('Error fetching events:', error);\n      });\n    };\n    fetchData();\n  }, []);\n\n  //saves data to database\n  useEffect(() => {\n    const saveToDatabase = () => {\n      try {\n        // console.log(\"SAVETODATABASE\", JSON.stringify(events));\n        fetch('http://localhost:4000/api/schedule/save-events', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(events),\n          credentials: 'include'\n        });\n      } catch (error) {\n        console.log(\"error saveToDatabase\", error);\n      }\n    };\n    //if already mounted, save events to database\n    if (mounted) {\n      saveToDatabase();\n    }\n    //if mounting for the first time, dont save\n    else {\n      setMounted(true);\n    }\n  }, [events]);\n  const ToggleFormPopup = () => {\n    setIsFormOpen(!isFormOpen);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"schedulepage-container\",\n    children: [/*#__PURE__*/_jsxDEV(Schedule, {\n      myEvents: events,\n      currEvents: events,\n      updateEvents: setEvents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: AddBtn,\n      onClick: ToggleFormPopup,\n      id: \"add-btn\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), isFormOpen && /*#__PURE__*/_jsxDEV(AddEventPopup, {\n      setEvents: setEvents,\n      currEvents: events,\n      toggleForm: ToggleFormPopup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(SchedulePage, \"yTZXWou/B0RzUE0C8JhS+UKe7KQ=\", false, function () {\n  return [useNavigate];\n});\n_c = SchedulePage;\nexport default SchedulePage;\nvar _c;\n$RefreshReg$(_c, \"SchedulePage\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Schedule","AddEventPopup","AddBtn","jsxDEV","_jsxDEV","SchedulePage","_s","events","setEvents","mounted","setMounted","isFormOpen","setIsFormOpen","navigate","fetchData","fetch","method","credentials","then","response","status","json","data","catch","error","console","saveToDatabase","headers","body","JSON","stringify","log","ToggleFormPopup","className","children","myEvents","currEvents","updateEvents","fileName","_jsxFileName","lineNumber","columnNumber","src","onClick","id","toggleForm","_c","$RefreshReg$"],"sources":["C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/src/components/schedule-page/Schedulepage.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../../styles/schedule-page/Schedulepage.css';\r\nimport Schedule from './Schedule';\r\nimport AddEventPopup from './AddEventPopup';\r\nimport AddBtn from \"../../assets/add-btn.png\"\r\n\r\nconst SchedulePage = () => {\r\n\r\n    //state variable and function to keep track of all events\r\n    const [events, setEvents] = useState([]);\r\n    \r\n    const [mounted, setMounted] = useState(false);\r\n    \r\n    //boolean to determine if the form popup is open\r\n    const [isFormOpen, setIsFormOpen] = useState(false);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    //fetches previously saved events from database\r\n    useEffect(() => {\r\n        const fetchData = () => {\r\n          fetch('http://localhost:4000/api/schedule/my-events', {\r\n            method: 'GET',\r\n            credentials: 'include',\r\n          })\r\n          .then(response => {\r\n            if (response.status === 401) {\r\n              navigate('/login');\r\n              return;\r\n            }\r\n            return response.json();\r\n          })\r\n          .then(data => {\r\n            setEvents(data);\r\n          })\r\n          .catch(error => {\r\n            console.error('Error fetching events:', error);\r\n          });\r\n        };\r\n      \r\n        fetchData();\r\n      }, []);\r\n\r\n    //saves data to database\r\n    useEffect(() => {\r\n        const saveToDatabase = () => {\r\n            try{\r\n                // console.log(\"SAVETODATABASE\", JSON.stringify(events));\r\n                    fetch('http://localhost:4000/api/schedule/save-events', {\r\n                    method:'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(events),\r\n                    credentials: 'include'\r\n                })\r\n            } catch (error) {\r\n                console.log(\"error saveToDatabase\", error);\r\n            }\r\n        }\r\n        //if already mounted, save events to database\r\n        if(mounted){\r\n            saveToDatabase();\r\n        }\r\n        //if mounting for the first time, dont save\r\n        else{\r\n            setMounted(true);\r\n        }\r\n    }, [events]);\r\n\r\n    const ToggleFormPopup = () => {\r\n        setIsFormOpen(!isFormOpen);\r\n    }\r\n\r\n    return (\r\n        <div className=\"schedulepage-container\">\r\n            {/* component that includes that calendar itself */}\r\n            <Schedule myEvents={events} currEvents={events} updateEvents={setEvents}/>\r\n            {/* image of a plus sign to add events */}\r\n            <img src={AddBtn} onClick={ToggleFormPopup} id=\"add-btn\"/>\r\n            {/* AddEventPopup component will only show if isFormOpen variable is true */}\r\n            {isFormOpen && \r\n                <AddEventPopup \r\n                    setEvents={setEvents}\r\n                    currEvents={events}\r\n                    toggleForm={ToggleFormPopup}/>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SchedulePage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}