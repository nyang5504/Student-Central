{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from'react-router-dom';import'../../styles/user-profile/Login.css';// Main function for the form\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),formStrings=_useState2[0],setFormStrings=_useState2[1];//Declare variables\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var navigate=useNavigate();// Allows users to type in the form\nvar handleInputChange=function handleInputChange(e){setFormStrings(_objectSpread(_objectSpread({},formStrings),{},_defineProperty({},e.target.name,e.target.value)));};// fetches post request so user data is sent to database\nvar handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// stops page from refreshing\ne.preventDefault();// Check if username and password are entered\nif(formStrings.username){_context.next=4;break;}alert(\"Please enter a username.\");return _context.abrupt(\"return\");case 4:if(formStrings.password){_context.next=7;break;}alert(\"Please enter a password.\");return _context.abrupt(\"return\");case 7:_context.prev=7;_context.next=10;return fetch('http://localhost:4000/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formStrings),credentials:'include'});case 10:response=_context.sent;if(response.ok){console.log('Login successful');//Redirects user to their profile page\nnavigate('/profile');}else{setErrorMessage('Wrong username and password');//Resets form\nsetFormStrings({username:'',password:''});}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](7);console.error('Error logging in: ',_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[7,14]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",value:formStrings.username,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formStrings.password,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{children:errorMessage}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Don't Have an Account?\"})]})})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginForm","_useState","username","password","_useState2","_slicedToArray","formStrings","setFormStrings","_useState3","_useState4","errorMessage","setErrorMessage","navigate","handleInputChange","e","_objectSpread","_defineProperty","target","name","value","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","preventDefault","alert","abrupt","fetch","method","headers","body","JSON","stringify","credentials","sent","ok","console","log","t0","error","stop","_x","apply","arguments","className","children","onSubmit","htmlFor","type","id","onChange","to"],"sources":["C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/src/components/user-profile/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport '../../styles/user-profile/Login.css';\r\n\r\n// Main function for the form\r\nconst LoginForm = () => {\r\n    const [formStrings, setFormStrings] = useState({\r\n        username: '',\r\n        password: '',\r\n    });\r\n\r\n    //Declare variables\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n    const navigate = useNavigate();\r\n\r\n    // Allows users to type in the form\r\n    const handleInputChange = (e) => {\r\n        setFormStrings({\r\n            ...formStrings,\r\n            [e.target.name]: e.target.value,\r\n        });\r\n    };\r\n\r\n    // fetches post request so user data is sent to database\r\n    const handleLogin = async (e) => {\r\n        // stops page from refreshing\r\n        e.preventDefault();\r\n        // Check if username and password are entered\r\n        if (!formStrings.username) {\r\n            alert(\"Please enter a username.\");\r\n            return;\r\n        }\r\n\r\n        if (!formStrings.password) {\r\n            alert(\"Please enter a password.\");\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            const response = await fetch('http://localhost:4000/api/login', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(formStrings),\r\n                credentials: 'include',\r\n            });\r\n\r\n            if (response.ok) {\r\n                console.log('Login successful');\r\n                //Redirects user to their profile page\r\n                navigate('/profile');\r\n            } else {\r\n                setErrorMessage('Wrong username and password');\r\n                //Resets form\r\n                setFormStrings({\r\n                    username: '',\r\n                    password: '',\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error logging in: ', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"login-container\">\r\n            <h2 className=\"title\">Login</h2>\r\n            <div className=\"form\">\r\n                <form onSubmit={handleLogin}>\r\n                    <label htmlFor=\"username\">Username:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"username\"\r\n                        name=\"username\"\r\n                        value={formStrings.username}\r\n                        onChange={handleInputChange}\r\n                    />\r\n\r\n                    <label htmlFor=\"password\">Password:</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        name=\"password\"\r\n                        value={formStrings.password}\r\n                        onChange={handleInputChange}\r\n                    />\r\n\r\n                    <button type=\"submit\">Login</button>\r\n                    {errorMessage && <p>{errorMessage}</p>}\r\n                    <br />\r\n                    <Link to={\"/register\"}>Don't Have an Account?</Link>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoginForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}