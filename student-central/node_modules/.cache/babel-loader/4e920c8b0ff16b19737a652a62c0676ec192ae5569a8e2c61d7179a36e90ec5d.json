{"ast":null,"code":"import _objectSpread from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useLocation}from'react-router-dom';import{useNavigate}from'react-router-dom';import'../../styles/quiz-page/SavedQuizzes.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SavedQuizzes=function SavedQuizzes(){var location=useLocation();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),allQuizzes=_useState2[0],setAllQuizzes=_useState2[1];// Retrieve all of the user's quizzes from the database\nuseEffect(function(){var getQuizzes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('http://localhost:4000/api/quiz/my-quizzes',{method:'GET',credentials:'include'});case 3:response=_context.sent;if(response.ok){_context.next=7;break;}navigate('/login');throw new Error('Failed to fetch quizzes.');case 7:_context.next=9;return response.json();case 9:data=_context.sent;setAllQuizzes(data);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log('Error getting quizzes:',_context.t0);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}));return function getQuizzes(){return _ref.apply(this,arguments);};}();getQuizzes();},[]);// Function to delete a quiz\nvar handleDeleteQuiz=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(quizName){var response,updatedQuizzes;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:4000/api/quiz/delete-quiz/\".concat(quizName),{method:'DELETE',credentials:'include'});case 3:response=_context2.sent;if(response.ok){_context2.next=6;break;}throw new Error('Failed to delete quiz.');case 6:// Create a shallow copy of the allQuizzes object and removes the deleted quiz\nupdatedQuizzes=_objectSpread({},allQuizzes);delete updatedQuizzes[quizName];// Update the state with the new copy\nsetAllQuizzes(updatedQuizzes);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log('Error deleting quiz:',_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return function handleDeleteQuiz(_x){return _ref2.apply(this,arguments);};}();// console.log(allQuizzes);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"saved-quizzes\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Saved Quizzes\"}),/*#__PURE__*/_jsx(\"ul\",{children:Object.keys(allQuizzes).map(function(quizName){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:quizName}),/*#__PURE__*/_jsx(Link,{to:\"start-quiz/\".concat(quizName),state:{prevPath:location.pathname},children:\"Start\"}),/*#__PURE__*/_jsx(Link,{to:\"edit-quiz/\".concat(quizName),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDeleteQuiz(quizName);},children:\"Delete\"})]},quizName);})})]});};export default SavedQuizzes;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","SavedQuizzes","location","navigate","_useState","_useState2","_slicedToArray","allQuizzes","setAllQuizzes","getQuizzes","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","method","credentials","sent","ok","Error","json","t0","console","log","stop","apply","arguments","handleDeleteQuiz","_ref2","_callee2","quizName","updatedQuizzes","_callee2$","_context2","concat","_objectSpread","_x","className","children","Object","keys","map","to","state","prevPath","pathname","onClick"],"sources":["C:/Users/ninay/Documents/capstone-499/Student-Central/student-central/src/components/quiz-page/SavedQuizzes.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../../styles/quiz-page/SavedQuizzes.css';\r\n\r\nconst SavedQuizzes = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [allQuizzes, setAllQuizzes] = useState({});\r\n\r\n  // Retrieve all of the user's quizzes from the database\r\n  useEffect(() => {\r\n    const getQuizzes = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:4000/api/quiz/my-quizzes', {\r\n          method: 'GET',\r\n          credentials: 'include'\r\n        });\r\n        if (!response.ok) {\r\n          navigate('/login');\r\n          throw new Error('Failed to fetch quizzes.');\r\n        }\r\n        const data = await response.json();\r\n        setAllQuizzes(data);\r\n      } catch (error) {\r\n        console.log('Error getting quizzes:', error);\r\n      }\r\n    };\r\n    getQuizzes();\r\n  }, []);\r\n\r\n  // Function to delete a quiz\r\n  const handleDeleteQuiz = async (quizName) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:4000/api/quiz/delete-quiz/${quizName}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include'\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to delete quiz.');\r\n      }\r\n      // Create a shallow copy of the allQuizzes object and removes the deleted quiz\r\n      const updatedQuizzes = { ...allQuizzes };\r\n      delete updatedQuizzes[quizName];\r\n      // Update the state with the new copy\r\n      setAllQuizzes(updatedQuizzes);\r\n    } catch (error) {\r\n      console.log('Error deleting quiz:', error);\r\n    }\r\n  };\r\n  // console.log(allQuizzes);\r\n  \r\n  return (\r\n    <div className=\"saved-quizzes\">\r\n      <h2>Saved Quizzes</h2>\r\n      <ul>\r\n        {/* Maps the quizzes and each quiz can be started or deleted now */}\r\n        {Object.keys(allQuizzes).map((quizName) => {\r\n          return (\r\n            <li key={quizName}>\r\n              <span>{quizName}</span>\r\n              {/* Start quiz button which redirects user to start quiz page for that quiz */}\r\n              <Link to={`start-quiz/${quizName}`}\r\n              state={{prevPath: location.pathname}}>Start</Link>\r\n              {/* Edit quiz button which redirects user to edit quiz page for that quiz */}\r\n              <Link to={`edit-quiz/${quizName}`}>Edit</Link>\r\n              <button onClick={() => handleDeleteQuiz(quizName)}>Delete</button>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SavedQuizzes;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}